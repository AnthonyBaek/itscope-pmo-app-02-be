---
description:
globs:
alwaysApply: false
---
# ë¡œë“œë§µ Phase 01: ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ê¸°ë°˜ ë¡œê·¸ì¸ ì‹œìŠ¤í…œ êµ¬í˜„

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

**ëª©í‘œ**: ì‚¬ì „ ë“±ë¡ëœ ì‚¬ìš©ìì˜ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ë¥¼ í†µí•œ JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„
**ê¸°ìˆ  ìŠ¤íƒ**: Spring Boot + Spring Security + JWT (Backend) / React + Axios (Frontend)
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 3-5ì¼ (ë³‘ë ¬ ê°œë°œ)

---

## ğŸ¯ Step 0: API ëª…ì„¸ ê³µë™ ì„¤ê³„ (API Contract First)

### ğŸ“ API ëª…ì„¸ì„œ

#### 1. ë¡œê·¸ì¸ API
```
POST /api/auth/login
Content-Type: application/json

Request Body:
{
  "email": "test@test.com",
  "password": "password123"
}

Success Response (200 OK):
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "tokenType": "Bearer",
  "expiresIn": 3600
}

Error Response (401 Unauthorized):
{
  "message": "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

#### 2. ë©”ì¸ í˜ì´ì§€ ë°ì´í„° API
```
GET /api/main
Authorization: Bearer {accessToken}

Success Response (200 OK):
{
  "message": "ì•ˆë…•í•˜ì„¸ìš”, test@test.com ë‹˜!",
  "user": {
    "email": "test@test.com",
    "name": "í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì"
  }
}

Error Response (401 Unauthorized):
{
  "message": "ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### ğŸ”„ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
1. **ì •ìƒ ë¡œê·¸ì¸**: `test@test.com` / `password123` â†’ JWT í† í° ë°œê¸‰
2. **ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸**: `test@test.com` / `wrong` â†’ 401 ì—ëŸ¬
3. **ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë©”ì¼**: `none@test.com` / `password123` â†’ 401 ì—ëŸ¬
4. **í† í° ì—†ì´ ë©”ì¸ ì ‘ê·¼**: Authorization í—¤ë” ì—†ìŒ â†’ 401 ì—ëŸ¬
5. **ìœ íš¨í•œ í† í°ìœ¼ë¡œ ë©”ì¸ ì ‘ê·¼**: ì˜¬ë°”ë¥¸ JWT â†’ ì‚¬ìš©ì ì •ë³´ ë°˜í™˜

---

## ğŸš€ Step 1: ê¸°ë°˜ êµ¬ì¶•

### ğŸ”§ ë°±ì—”ë“œ (Spring Boot)

#### 1.1 ì˜ì¡´ì„± ì¶”ê°€ (`pom.xml` ë˜ëŠ” `build.gradle`)

**Maven (pom.xml)**:
```xml
<dependencies>
    <!-- Spring Boot Starters -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-security</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-validation</artifactId>
    </dependency>
    
    <!-- Database -->
    <dependency>
        <groupId>org.postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <scope>runtime</scope>
    </dependency>
    
    <!-- JWT -->
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-api</artifactId>
        <version>0.11.5</version>
    </dependency>
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-impl</artifactId>
        <version>0.11.5</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-jackson</artifactId>
        <version>0.11.5</version>
        <scope>runtime</scope>
    </dependency>
</dependencies>
```

#### 1.2 User ì—”í‹°í‹° ìƒì„±

```java
// src/main/java/com/example/demo/entity/User.java
@Entity
@Table(name = "users")
@Getter @Setter @NoArgsConstructor
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(unique = true, nullable = false)
    private String email;
    
    @Column(nullable = false)
    private String password;
    
    @Column(nullable = false)
    private String name;
    
    @CreationTimestamp
    private LocalDateTime createdAt;
    
    public User(String email, String password, String name) {
        this.email = email;
        this.password = password;
        this.name = name;
    }
}
```

#### 1.3 ê¸°ë³¸ ì„¤ì • íŒŒì¼

**application.yml**:
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/your_database
    username: your_username
    password: your_password
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: create-drop  # ê°œë°œ í™˜ê²½ìš©
    show-sql: true
    properties:
      hibernate:
        format_sql: true
  
  security:
    user:
      password: temp  # ê¸°ë³¸ ë³´ì•ˆ ì„¤ì • ë¹„í™œì„±í™”ìš©

# JWT ì„¤ì •
jwt:
  secret: mySecretKey123456789012345678901234567890  # ì‹¤ì œë¡œëŠ” ë” ë³µì¡í•˜ê³  ì•ˆì „í•œ í‚¤ ì‚¬ìš©
  expiration: 3600000  # 1ì‹œê°„ (ë°€ë¦¬ì´ˆ)
```

### ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ (React)

#### 1.1 í”„ë¡œì íŠ¸ ìƒì„± ë° ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# Viteë¥¼ ì‚¬ìš©í•œ React í”„ë¡œì íŠ¸ ìƒì„±
npm create vite@latest frontend-app -- --template react
cd frontend-app
npm install

# ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
npm install axios react-router-dom
```

#### 1.2 ê¸°ë³¸ ë¼ìš°íŒ… ì„¤ì •

```jsx
// src/App.jsx
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import LoginPage from './pages/LoginPage';
import MainPage from './pages/MainPage';

function App() {
  return (
    <Router>
      <Routes>
        <Route path="/login" element={<LoginPage />} />
        <Route path="/" element={<MainPage />} />
      </Routes>
    </Router>
  );
}

export default App;
```

#### 1.3 ê¸°ë³¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ìƒì„±

**LoginPage.jsx**:
```jsx
// src/pages/LoginPage.jsx
import { useState } from 'react';

function LoginPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setError('');
    
    // TODO: Step 3ì—ì„œ ì‹¤ì œ API í˜¸ì¶œë¡œ êµì²´ ì˜ˆì •
    console.log('ë¡œê·¸ì¸ ì‹œë„:', { email, password });
    setLoading(false);
  };

  return (
    <div style={{ maxWidth: '400px', margin: '100px auto', padding: '20px' }}>
      <h2>ë¡œê·¸ì¸</h2>
      <form onSubmit={handleSubmit}>
        <div style={{ marginBottom: '15px' }}>
          <label>ì´ë©”ì¼:</label>
          <input
            type="email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            required
            style={{ width: '100%', padding: '8px', marginTop: '5px' }}
          />
        </div>
        <div style={{ marginBottom: '15px' }}>
          <label>ë¹„ë°€ë²ˆí˜¸:</label>
          <input
            type="password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            required
            style={{ width: '100%', padding: '8px', marginTop: '5px' }}
          />
        </div>
        {error && <div style={{ color: 'red', marginBottom: '15px' }}>{error}</div>}
        <button 
          type="submit" 
          disabled={loading}
          style={{ width: '100%', padding: '10px', backgroundColor: '#007bff', color: 'white', border: 'none' }}
        >
          {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'ë¡œê·¸ì¸'}
        </button>
      </form>
    </div>
  );
}

export default LoginPage;
```

**MainPage.jsx**:
```jsx
// src/pages/MainPage.jsx
import { useState, useEffect } from 'react';

function MainPage() {
  const [userInfo, setUserInfo] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // TODO: Step 3ì—ì„œ ì‹¤ì œ API í˜¸ì¶œë¡œ êµì²´ ì˜ˆì •
    // Mock ë°ì´í„°ë¡œ UI ê°œë°œ
    setTimeout(() => {
      setUserInfo({
        message: "ì•ˆë…•í•˜ì„¸ìš”, test@test.com ë‹˜!",
        user: { email: "test@test.com", name: "í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì" }
      });
      setLoading(false);
    }, 1000);
  }, []);

  if (loading) {
    return <div style={{ textAlign: 'center', marginTop: '100px' }}>ë¡œë”© ì¤‘...</div>;
  }

  return (
    <div style={{ maxWidth: '600px', margin: '50px auto', padding: '20px' }}>
      <h1>ë©”ì¸ í˜ì´ì§€</h1>
      {userInfo && (
        <div>
          <p>{userInfo.message}</p>
          <div style={{ backgroundColor: '#f8f9fa', padding: '15px', marginTop: '20px' }}>
            <h3>ì‚¬ìš©ì ì •ë³´</h3>
            <p>ì´ë©”ì¼: {userInfo.user.email}</p>
            <p>ì´ë¦„: {userInfo.user.name}</p>
          </div>
        </div>
      )}
      <button 
        onClick={() => {
          // TODO: Step 4ì—ì„œ ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ êµ¬í˜„
          console.log('ë¡œê·¸ì•„ì›ƒ');
        }}
        style={{ marginTop: '20px', padding: '10px 20px', backgroundColor: '#dc3545', color: 'white', border: 'none' }}
      >
        ë¡œê·¸ì•„ì›ƒ
      </button>
    </div>
  );
}

export default MainPage;
```

---

## ğŸ“Š Step 1 ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ë°±ì—”ë“œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] Spring Boot í”„ë¡œì íŠ¸ ìƒì„± ì™„ë£Œ
- [ ] í•„ìš”í•œ ì˜ì¡´ì„± (Spring Security, JWT, PostgreSQL) ì¶”ê°€ ì™„ë£Œ
- [ ] User ì—”í‹°í‹° í´ë˜ìŠ¤ ì‘ì„± ì™„ë£Œ
- [ ] application.yml ê¸°ë³¸ ì„¤ì • ì™„ë£Œ
- [ ] í”„ë¡œì íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸ (`mvn spring-boot:run`)

### âœ… í”„ë¡ íŠ¸ì—”ë“œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] React í”„ë¡œì íŠ¸ ìƒì„± ì™„ë£Œ
- [ ] í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ (axios, react-router-dom) ì„¤ì¹˜ ì™„ë£Œ
- [ ] ê¸°ë³¸ ë¼ìš°íŒ… ì„¤ì • ì™„ë£Œ (`/login`, `/` ê²½ë¡œ)
- [ ] LoginPage, MainPage ì»´í¬ë„ŒíŠ¸ ìƒì„± ì™„ë£Œ
- [ ] í”„ë¡œì íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸ (`npm run dev`)

### ğŸ¤ í˜‘ì—… í™•ì¸ì‚¬í•­
- [ ] API ëª…ì„¸ì„œë¥¼ ì–‘íŒ€ì´ ê²€í† í•˜ê³  í•©ì˜ ì™„ë£Œ
- [ ] í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì–‘íŒ€ì´ ì´í•´í•˜ê³  ìˆìŒ
- [ ] ë‹¤ìŒ ë‹¨ê³„(Step 2) ì§„í–‰ ì¼ì • í˜‘ì˜ ì™„ë£Œ

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ ë¯¸ë¦¬ë³´ê¸°

**Step 2**ì—ì„œëŠ”:
- **ë°±ì—”ë“œ**: í…ŒìŠ¤íŠ¸ìš© ì‚¬ìš©ì ë°ì´í„° ì‚½ì…, UserDetailsService êµ¬í˜„
- **í”„ë¡ íŠ¸ì—”ë“œ**: Mock ë¡œê·¸ì¸ í•¨ìˆ˜ êµ¬í˜„, ìƒíƒœ ê´€ë¦¬ ë¡œì§ ê°œë°œ

ê° ë‹¨ê³„ê°€ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ì—¬, ìµœì¢…ì ìœ¼ë¡œ ì™„ì „í•œ ë¡œê·¸ì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ì˜ˆì •ì…ë‹ˆë‹¤.
